访问网页的核心流程是 “**域名解析 → 建立连接 → 发送请求 → 服务器处理 → 接收响应 → 渲染页面**”，整个过程由浏览器、DNS 服务器、目标 Web 服务器等多角色协同完成。

这个过程拆解后逻辑非常清晰，理解它能帮你快速定位网页打不开或加载慢的问题。

### 1. 域名解析（DNS）：把网址变成 IP 地址

浏览器无法直接通过域名（如`www.baidu.com`）找到服务器，必须先将其转换为服务器的 IP 地址（如`14.215.177.38`）。

- 1. 浏览器先检查本地缓存（如浏览器缓存、操作系统缓存），看是否有该域名对应的 IP，有则直接使用。
- 1. 本地缓存没有时，向本地 DNS 服务器（通常是路由器或运营商提供的 DNS）发送解析请求。
- 1. 本地 DNS 服务器若有缓存则返回结果，若无则逐层向上请求（根 DNS → 顶级域 DNS → 权威 DNS），最终获取 IP 地址并返回给浏览器。

### 2. 建立连接：通过 TCP 三次握手建立通信通道

获取 IP 后，浏览器会与目标 Web 服务器通过**TCP 协议**建立可靠连接，核心是 “三次握手”：

- 1. 浏览器（客户端）向服务器发送 “连接请求” 数据包（SYN）。
- 1. 服务器收到后，回复 “同意连接” 数据包（SYN+ACK）。
- 1. 浏览器收到回复后，再发送 “确认连接” 数据包（ACK），此时连接正式建立。
- *补充*：若网页使用 HTTPS 协议，还会在 TCP 连接后增加**TLS 握手**步骤，协商加密方式、交换证书，确保后续数据传输安全。

### 3. 发送请求：浏览器向服务器提交 HTTP/HTTPS 请求

连接建立后，浏览器会按照 HTTP（或 HTTPS）协议，向服务器发送请求数据包，包含关键信息：

- 请求方法：如`GET`（获取资源，如访问网页）、`POST`（提交数据，如登录表单）。
- 请求头：包含浏览器信息（User-Agent）、Cookie、缓存策略（如`Cache-Control`）等。
- 请求体：仅`POST`等方法会携带，存放提交的表单数据（如用户名、密码）。

### 4. 服务器处理：接收请求并返回响应

目标 Web 服务器（如 Nginx、Apache）接收到请求后，按流程处理并生成响应：

- 1. 服务器先解析请求头和请求体，判断请求的资源（如`/index.html`）。
- 1. 若请求静态资源（HTML、CSS、图片），直接从服务器磁盘读取文件；若请求动态资源（如 PHP、Java 接口），会调用后端程序（如 MySQL 数据库查询数据），生成动态内容。
- 1. 服务器将处理结果封装成 HTTP 响应数据包，包含响应状态码（如`200 OK`表示成功、`404 Not Found`表示资源不存在）、响应头（如`Content-Type`表示资源类型）和响应体（资源内容，如 HTML 代码）。

### 5. 接收响应：浏览器处理响应并缓存（可选）

浏览器收到服务器的响应后，会先做两件事：

- 1. 检查响应头中的缓存规则（如`Cache-Control`、`ETag`），若符合缓存条件，将资源（如 CSS、图片）存储到本地，方便下次访问时复用。
- 1. 根据响应状态码处理：若`200 OK`则继续渲染；若`304 Not Modified`则使用本地缓存；若`404`或`500`则显示错误页面。

### 6. 渲染页面：将 HTML 代码转换成可视化网页

这是浏览器将 “文本代码” 变成 “可见页面” 的核心步骤，主要由渲染引擎（如 Chrome 的 Blink）完成：

- 1. **解析 HTML**：生成 DOM 树（文档对象模型），描述页面的结构（标签、文本、属性等）。
- 1. **解析 CSS**：生成 CSSOM 树（CSS 对象模型），描述页面的样式（颜色、字体、布局等）。
- 1. **构建渲染树**：将 DOM 树与 CSSOM 树合并，只包含需要显示的节点和对应的样式。
- 1. **布局与绘制**：根据渲染树计算每个节点的位置和大小（布局），再将节点绘制到屏幕上（绘制），最终呈现完整网页。

------

