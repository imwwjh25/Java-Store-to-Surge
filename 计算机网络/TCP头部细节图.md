# TCP 头部详细结构图




```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          源端口(16bit)        |        目的端口(16bit)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      序号  Seq (32bit)                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    确认号  Ack (32bit)                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  头部长度  |  保留位(6bit) |     标志位(6bit)     |  窗口大小   |
|  4bit     |000000| URG|ACK|PSH|RST|SYN|FIN|     (16bit)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         校验和(16bit)         |       紧急指针(16bit)         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    选项 + 填充 (可变长度)                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           数据部分                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

------

# 每个字段含义（精简面试版）

1. **源端口 (16bit)**：本地应用端口

2. **目的端口 (16bit)**：目标应用端口

3. **序号 Seq (32bit)**：本次发送数据的第一个字节编号

4. **确认号 Ack (32bit)**：期望收到的下一个字节编号

5. **头部长度 (4bit)**：TCP 头部长度，单位 4 字节，最大 60 字节

6. **保留位 (6bit)**：全 0

7. 标志位 (6bit)：

    - URG：紧急指针有效
    - ACK：确认号有效
    - PSH：推送操作，立即交给应用层
    - RST：重置连接
    - SYN：建立连接
    - FIN：关闭连接



8. **窗口大小 (16bit)**：流量控制，接收方缓冲区大小

9. **校验和 (16bit)**：校验头部 + 数据

10. **紧急指针 (16bit)**：URG=1 时有效

11. **选项 + 填充**：如 MSS、SACK、时间戳等

12. **数据**：上层协议数据